<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Pandas</title>

		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Dario Necco">

		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/admonitions.css">		
		<link rel="stylesheet" href="dist/theme/nalug.css" id="theme">

		<!-- Theme used for syntax highlighting of code -->
        <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/styles/default.min.css">-->
		<link rel="stylesheet" href="plugin/highlight/monokai.css" id="highlight-theme">
		
		<!-- Third Party Plugin for copy code snippet -->
		<link rel="stylesheet" href="plugin/copycode/copycode.css">

        <style>
            .copy-code-button {
                color: #272822;
                background-color: #FFF;
                border-color: #272822;
                border: 2px solid;
                border-radius: 3px 3px 0px 0px;
            
                /* right-align */
                display: block;
                margin-left: auto;
                /* margin-right: -18px; */
                /* margin-bottom: -60px; */
                margin-right: 0px;
                margin-bottom: -45px;
                padding: 3px 8px;
                font-size: 0.4em;
            }
            
            .copy-code-button:hover {
                cursor: pointer;
                background-color: #F2F2F2;
            }
            
            .copy-code-button:focus {
                /* Avoid an ugly focus outline on click in Chrome,
                   but darken the button for accessibility.
                   See https://stackoverflow.com/a/25298082/1481479 */
                background-color: #E6E6E6;
                outline: 0;
            }
            
            .copy-code-button:active {
                background-color: #D9D9D9;
            }
            
            .highlight pre {
                /* Avoid pushing up the copy buttons. */
                margin: 0;
            }
        </style>

	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">

                <section data-background-image="Pandas/nalug.png">
<p><img alt="" src="Pandas/logo.svg"/></p>
</section>        
<section data-background-image="Pandas/nalug.png">
<h1 id="about-me">About me</h1>
<p><img alt="" src="common/me.jpg"/></p>
<ul>
<li>Principal Technical Consultant Engineer @ Perforce</li>
<li><a href="https://www.linkedin.com/in/dartie/">https://www.linkedin.com/in/dartie/</a></li>
<li>Member of Nalug (<a href="https://www.nalug.tech/">https://www.nalug.tech/</a>)</li>
<li>Python and Go(lang) developer</li>
</ul>
</section>        
<section data-background-image="Pandas/nalug.png">
<section data-background-image="Pandas/nalug.png">
<h1 id="introduction">Introduction</h1>
<ul>
<li>Data analysis is the process of inspecting, cleansing, transforming, and modelling data with the goal of discovering useful information</li>
</ul>
<div class="admonition example">
<p class="admonition-title">Example</p>
<p>Whenever we take any decision in our day-to-day life is by thinking about what happened last time or what will happen by choosing that particular decision. </p>
</div>
</section>        
<section data-background-image="Pandas/nalug.png">
<pre class="highlight"><code class="language-plain">“pandas is an open source, BSD-licensed library providing high 
performance, easy-to-use data structures and data analysis tools 
for the Python programming language.”

-pandas.pydata.org</code></pre>
<pre class="highlight"><code class="language-plain">“In memory nosql database, that has sql-like constructs, basic 
statistical and analytic support, as well as graphing capability.”

-Matt Harrison</code></pre>
<ul>
<li>
<p>It is built on top of Cython, therefore it has less memory overhead and runs quicker.</p>
</li>
<li>
<p>Pandas allow users to avoid using a Python-like dialect and gets close to the C in terms of performance.</p>
</li>
</ul>
<div class="admonition help">
<p class="admonition-title">Help</p>
<p>Cython is a compiled language that is typically used to generate CPython extension modules.</p>
</div>
</section>        

</section>        
<section data-background-image="Pandas/nalug.png">
<section data-background-image="Pandas/nalug.png">
<h1 id="installation">Installation</h1>
<pre class="highlight"><code class="language-bash">pip3 install pandas</code></pre>
<h1 id="import-conventions">Import conventions</h1>
<pre class="highlight"><code class="language-python">import pandas as pd</code></pre>
</section>        
<section data-background-image="Pandas/nalug.png">
<h1 id="ide">IDE</h1>
<ul>
<li>
<p>Local environments</p>
<ul>
<li><a href="https://www.jetbrains.com/pycharm">Pycharm CE</a></li>
<li><a href="https://www.spyder-ide.org/">Spyder</a></li>
</ul>
</li>
<li>
<p>Web-based environments</p>
<ul>
<li><a href="https://jupyter.org/install">Jupyter Lab / Jupyter Notebook</a></li>
<li><a href="https://colab.research.google.com/">Colab</a></li>
</ul>
</li>
</ul>
</section>        

</section>        
<section data-background-image="Pandas/nalug.png">
<section data-background-image="Pandas/nalug.png">
<h1 id="data-structures">Data Structures</h1>
<table>
<thead>
<tr>
<th>Data structure</th>
<th>Dimensionality</th>
<th>Spreadsheet Analog</th>
<th>Data deals with</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Series</strong></td>
<td>1D</td>
<td>Column</td>
<td>Array</td>
</tr>
<tr>
<td><strong>Dataframe</strong></td>
<td>2D</td>
<td>Single Sheet</td>
<td>Tabular</td>
</tr>
<tr>
<td><strong>Panel</strong></td>
<td>3D</td>
<td>Multiple Sheets</td>
<td></td>
</tr>
</tbody>
</table>
</section>        
<section data-background-image="Pandas/nalug.png">
<p><img alt="" src="Pandas/data_structures.png"/></p>
<ul>
<li>Dataframe : collection of series objects</li>
<li>Panel : collection of dataframes objects</li>
</ul>
</section>        

</section>        
<section data-background-image="Pandas/nalug.png">
<section data-background-image="Pandas/nalug.png">
<h1 id="series">Series</h1>
<ul>
<li>One dimensional data structure.</li>
<li>It can hold numerical data, time data, strings, or arbitrary Python objects.</li>
<li>It is used to model one dimensional data, similar to a list in Python</li>
<li>It's formed of <code class="inline">index</code> and a <code class="inline">name</code></li>
<li>Many of the operations performed on a Series operate directly on the index or by index lookup</li>
<li>It is faster, consumes less memory, and comes with built-in methods that are very useful to manipulate the data.</li>
</ul>
</section>        
<section data-background-image="Pandas/nalug.png">
<table>
<thead>
<tr>
<th>Artist</th>
<th>Data</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>145</td>
</tr>
<tr>
<td>1</td>
<td>142</td>
</tr>
<tr>
<td>2</td>
<td>38</td>
</tr>
<tr>
<td>3</td>
<td>13</td>
</tr>
</tbody>
</table>
<pre class="highlight"><code class="language-python">ser = {
    'index':[0, 1, 2, 3],
    'data':[145, 142, 38, 13],
    'name':'songs'
}</code></pre>
</section>        
<section data-background-image="Pandas/nalug.png">
<h2 id="native-python-implementation">Native python implementation</h2>
<pre class="highlight"><code class="language-python">songs = {
    'index':['Paul', 'John', 'George', 'Ringo'],
    'data':[145, 142, 38, 13],
    'name':'counts'
}


def get(ser, idx):
    value_idx = ser['index'].index(idx)
    return ser['data'][value_idx]


get(songs, 'John')</code></pre>
<pre class="highlight"><code class="inline">142</code></pre>
</section>        
<section data-background-image="Pandas/nalug.png">
<h1 id="series-types">Series Types</h1>
<ul>
<li><strong>Index</strong>: Series' indexes can be integers or strings</li>
<li><strong>Data</strong>: a Series can hold strings, floats, booleans, or arbitrary Python objects</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To get the best speed (such as vectorized operations), the values should be of the same type</p>
</div>
</section>        
<section data-background-image="Pandas/nalug.png">
<h2 id="types">Types</h2>
<ul>
<li>
<p>Object:</p>
<ul>
<li>Used for heterogeneous types</li>
<li>Used for strings</li>
</ul>
</li>
<li>
<p>Number:</p>
<ul>
<li>Mixed int and float make float (int are converted to float64)</li>
</ul>
</li>
</ul>
</section>        
<section data-background-image="Pandas/nalug.png">
<ul>
<li>
<p>NaN (<strong>N</strong>ot <strong>a</strong> <strong>N</strong>umber):</p>
<ul>
<li>Used when a series holds numeric values, but it cannot find a number to represent an entry, it will use NaN.</li>
<li>It's not counted</li>
<li>When NaN is present, other integer data become float: NaN is only supported by float, not by int.</li>
</ul>
<pre class="highlight"><code class="language-python">nan_ser = pd.Series([2, None], index=['Ono', 'Clapton'])

print(nan_ser)</code></pre>
<pre class="highlight"><code class="language-plain">Ono      2.0
Clapton  NaN
dtype: float64</code></pre>
<pre class="highlight"><code class="language-python">nan_ser.count()</code></pre>
<pre class="highlight"><code class="language-plain">1</code></pre>
</li>
</ul>
</section>        
<section data-background-image="Pandas/nalug.png">
<h1 id="create-series">Create Series</h1>
<pre class="highlight"><code class="language-python">import pandas as pd

songs2 = pd.Series([145, 142, 38, 13], name='counts')

print(songs2)</code></pre>
<pre class="highlight"><code class="language-plain">0 145
1 142
2 38
3 13
Name: counts, dtype: int64</code></pre>
<p><img alt="" src="Pandas/series.png"/></p>
</section>        
<section data-background-image="Pandas/nalug.png">
<ul>
<li>Name for <code class="inline">Index</code> -&gt; <code class="inline">Axis</code></li>
<li>
<p>Name for <code class="inline">Values of the index</code> -&gt; <code class="inline">Axis labels</code></p>
</li>
<li>
<p>Inspect index</p>
<pre class="highlight"><code class="language-python">songs2.index</code></pre>
<pre class="highlight"><code class="language-plain">RangeIndex(start=0, stop=4, step=1)</code></pre>
</li>
</ul>
</section>        
<section data-background-image="Pandas/nalug.png">
<h1 id="series-indexing">Series Indexing</h1>
<h3 id="in-case-index-label-is-a-string-object">In case index label is a string (object)</h3>
<pre class="highlight"><code class="language-python">george = pd.Series([10, 7], index=['1968', '1969'], name='George Songs')
print(george)</code></pre>
<pre class="highlight"><code class="language-plain">1968    10
1969     7
Name: George Songs, dtype: int64</code></pre>
<ul>
<li>
<p>Indexing the object by position</p>
<pre class="highlight"><code class="language-python">print(george[0])</code></pre>
<pre class="highlight"><code class="language-plain">10</code></pre>
</li>
<li>
<p>Indexing the object by key</p>
<pre class="highlight"><code class="language-python">print(george['1968'])</code></pre>
<pre class="highlight"><code class="language-plain">10</code></pre>
</li>
</ul>
</section>        
<section data-background-image="Pandas/nalug.png">
<h2 id="in-case-index-label-is-an-integer">In case index label is an integer</h2>
<ul>
<li>
<p>Indexing the object by position</p>
<pre class="highlight"><code class="language-python">print(george[0])</code></pre>
<pre class="highlight"><code class="language-plain">10</code></pre>
</li>
</ul>
</section>        
<section data-background-image="Pandas/nalug.png">
<h2 id="optimized-data-access-methods">Optimized data access methods</h2>
<h3 id="position-based-indexing-iloc">Position-based indexing (<code class="inline">.iloc</code>)</h3>
<pre class="highlight"><code class="language-python">george.iloc[0]</code></pre>
<pre class="highlight"><code class="language-plain">10</code></pre>
<pre class="highlight"><code class="language-python">george.iloc[-1]</code></pre>
<pre class="highlight"><code class="language-plain">7</code></pre>
<pre class="highlight"><code class="language-python">george.iloc[4]</code></pre>
<pre class="highlight"><code class="language-plain">Traceback (most recent call last):
IndexError: single positional indexer is out-of-bounds</code></pre>
<pre class="highlight"><code class="language-python">george.iloc['1968']</code></pre>
<pre class="highlight"><code class="language-plain">Traceback (most recent call last):
TypeError: cannot do positional indexing on &lt;class
'pandas.indexes.base.Index'&gt; with these indexers [1968]
of &lt;class 'str'&gt;</code></pre>
</section>        
<section data-background-image="Pandas/nalug.png">
<h4 id="slice">Slice</h4>
<pre class="highlight"><code class="language-python">george.iloc[0:3] # slice</code></pre>
<pre class="highlight"><code class="language-plain">1968    10
1969     7
Name: George Songs, dtype: int64</code></pre>
<h4 id="indexing-with-list">Indexing with list</h4>
<pre class="highlight"><code class="language-python">george.iloc[[0,1]] # list</code></pre>
<pre class="highlight"><code class="language-plain">1968  10
1969   7
Name: George Songs, dtype: int64</code></pre>
</section>        
<section data-background-image="Pandas/nalug.png">
<h3 id="label-based-indexing-loc">label-based indexing (<code class="inline">.loc</code>)</h3>
<ul>
<li>Based on the index labels and not the positions (analogous to Python dictionary-based indexing)</li>
</ul>
<pre class="highlight"><code class="language-python">george.loc['1968']</code></pre>
<pre class="highlight"><code class="language-plain">10</code></pre>
<pre class="highlight"><code class="language-python">george.loc[['1968', '1970']] # list</code></pre>
<pre class="highlight"><code class="language-plain">1968  10.0
1970   NaN
Name: George Songs, dtype: float64</code></pre>
<pre class="highlight"><code class="language-python">george.loc['1968':] # slice</code></pre>
<pre class="highlight"><code class="language-plain">1968  10
1969   7
Name: George Songs, dtype: int64</code></pre>
</section>        
<section data-background-image="Pandas/nalug.png">
<h2 id="summary">Summary</h2>
<p><img alt="" src="Pandas/indexing.png"/></p>
</section>        
<section data-background-image="Pandas/nalug.png">
<h2 id="at-vs-loc"><code class="inline">.at()</code> (vs <code class="inline">.loc()</code>)</h2>
<ul>
<li>Get/set numpy array results by index label.</li>
<li>Return a <strong>numpy.ndarray</strong> whereas <code class="inline">.loc()</code> returns a <strong>Series</strong> </li>
</ul>
<pre class="highlight"><code class="language-python">george_dupe = pd.Series([10, 7, 1, 22], index=['1968', '1969', '1970', '1970'], name='George Songs')</code></pre>
<pre class="highlight"><code class="language-python">george_dupe.at['1970']</code></pre>
<pre class="highlight"><code class="language-plain">array([ 1, 22])</code></pre>
<pre class="highlight"><code class="language-python">george_dupe.loc['1970']</code></pre>
<pre class="highlight"><code class="language-plain">1970     1
1970    22
Name: George Songs, dtype: int64</code></pre>
</section>        
<section data-background-image="Pandas/nalug.png">
<h2 id="iat"><code class="inline">.iat()</code></h2>
<ul>
<li>Getting/setting numpy array results by index position.</li>
<li>Supports both positional and label based indexing, although is suggested to be avoided</li>
</ul>
<pre class="highlight"><code class="language-python">george_dupe.ix[0]</code></pre>
<pre class="highlight"><code class="language-plain">3310</code></pre>
<pre class="highlight"><code class="language-python">george_dupe.ix['1970']</code></pre>
<pre class="highlight"><code class="language-plain">1970   1
1970  22
Name: George Songs, dtype: int64</code></pre>
</section>        
<section data-background-image="Pandas/nalug.png">
<h1 id="series-methods">Series methods</h1>
<h3 id="mean-vs-median">Mean vs Median</h3>
<p>Both are measures of where the center of a data set lies (called “Central Tendency” in stats), but they are usually different numbers. For example, take this list of numbers:
    </p><pre class="highlight"><code class="language-plain">10, 10, 20, 40, 70.</code></pre>
<ul>
<li>
<p>The mean (informally, the "average") is found by adding all the numbers together and dividing by the number of items in the set: 
    </p><pre class="highlight"><code class="language-plain">10 + 10 + 20 + 40 + 70 / 5 = 30.</code></pre>
</li>
<li>
<p>The median is found by ordering the set from lowest to highest and finding the exact middle. The median is just the middle number: 20.</p>
</li>
</ul>
<p>Sometimes the two will be the same number. For example, the data set 1, 2, 4, 6, 7 has a mean of 1 + 2 + 4 + 6 + 7 / 5 = 4 and a median (a middle) of 4.</p>
</section>        
<section data-background-image="Pandas/nalug.png">
<pre class="highlight"><code class="language-python">import pandas as pd

# Creating the Series
sr = pd.Series([10, 10, 20, 40, 70])

# Print results
print(sr.mean())
print(sr.median())</code></pre>
<pre class="highlight"><code class="language-plain">30.0
20.0</code></pre>
</section>        

</section>        
<section data-background-image="Pandas/nalug.png">
<section data-background-image="Pandas/nalug.png">
<h1 id="series-crud-createreadupdatedelete">Series CRUD (<code class="inline">C</code>reate,<code class="inline">R</code>ead,<code class="inline">U</code>pdate,<code class="inline">D</code>elete)</h1>
<h2 id="create">Create</h2>
<h3 id="list">List</h3>
<pre class="highlight"><code class="language-python">george_dupe = pd.Series([10, 7, 1, 22],
                        index=['1968', '1969', '1970', '1970'],
                        name='George Songs')
print(george_dupe)</code></pre>
<pre class="highlight"><code class="language-plain">1968  10
1969   7
1970   1
1970  22
Name: George Songs, dtype: int64</code></pre>
</section>        
<section data-background-image="Pandas/nalug.png">
<h3 id="dictionary">Dictionary</h3>
<pre class="highlight"><code class="language-python">g2 = pd.Series({'1969': 7, '1970': [1, 22]}, 
               index=['1969', '1970', '1970']) 
print(g2)</code></pre>
<pre class="highlight"><code class="language-plain">1969        7
1970  [1, 22]
1970  [1, 22]
dtype: object</code></pre>
</section>        
<section data-background-image="Pandas/nalug.png">
<h2 id="reading">Reading</h2>
<pre class="highlight"><code class="language-python">print(george_dupe['1968'])</code></pre>
<pre class="highlight"><code class="language-plain">10</code></pre>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When the index is duplicate, the result is not scalar as the first case</p>
<pre class="highlight"><code class="language-python">print(george_dupe['1970'])</code></pre>
<pre class="highlight"><code class="language-plain">1970   1
1970  22
Name: George Songs, dtype: int64</code></pre>
</div>
</section>        
<section data-background-image="Pandas/nalug.png">
<h3 id="iteration">Iteration</h3>
<pre class="highlight"><code class="language-python">for item in george_dupe:
    print(item)</code></pre>
<pre class="highlight"><code class="language-plain">10
7
1
22</code></pre>
<ul>
<li>
<p>Iteration over index and value</p>
<pre class="highlight"><code class="language-python">for index, value in george_dupe.iteritems():
    print(index, value)</code></pre>
<pre class="highlight"><code class="language-plain">1968  10
1969   7
1970   1
1970  22</code></pre>
</li>
</ul>
</section>        
<section data-background-image="Pandas/nalug.png">
<h3 id="check-if-value-exists">Check if value exists</h3>
<div class="admonition error">
<p class="admonition-title">Error</p>
<p>It doesn't work as python list and dictionary    </p>
<pre class="highlight"><code class="language-python">22 in george_dupe</code></pre>
<pre class="highlight"><code class="language-plain">False</code></pre>
</div>
<div class="admonition success">
<p class="admonition-title">Success</p>
<pre class="highlight"><code class="language-python">22 in set(george_dupe)</code></pre>
<pre class="highlight"><code class="language-plain">True</code></pre>
<p>OR</p>
<pre class="highlight"><code class="language-python">22 in george_dupe.values</code></pre>
<pre class="highlight"><code class="language-plain">True</code></pre>
</div>
</section>        
<section data-background-image="Pandas/nalug.png">
<h2 id="updating">Updating</h2>
<h3 id="update-based-on-index">Update based on index</h3>
<pre class="highlight"><code class="language-python">george_dupe['1969'] = 6
print(george_dupe['1969'])</code></pre>
<pre class="highlight"><code class="language-plain">6</code></pre>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>In case of duplicate index, both will be updated
</p><pre class="highlight"><code class="language-python">george_dupe['1970'] = 2
print(george_dupe)</code></pre>
<pre class="highlight"><code class="language-plain">1968    10
1969     6
1970     2
1970     2
1973    11
Name: George Songs, dtype: int64</code></pre>
</div>
</section>        
<section data-background-image="Pandas/nalug.png">
<h3 id="update-value-based-on-position-iloc">Update value based on position (<code class="inline">iloc()</code>)</h3>
<pre class="highlight"><code class="language-python">george_dupe.iloc[3] = 22
print(george_dupe)</code></pre>
<pre class="highlight"><code class="language-plain">1968  10
1969   6
1970   2
1970  22
1973  11
Name: George Songs, dtype: int64</code></pre>
</section>        
<section data-background-image="Pandas/nalug.png">
<h3 id="append">Append</h3>
<ul>
<li>Unlike <code class="inline">append()</code> in python list, it requires another series</li>
</ul>
<pre class="highlight"><code class="language-python">new_george_dupe = george_dupe.append(pd.Series({'1974': 9}))
print(new_george_dupe)</code></pre>
<pre class="highlight"><code class="language-plain">1968  10
1969   6
1970   2
1970  22
1973  11
1974   9
dtype: int64</code></pre>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>In January '22, Pandas 1.4.0 marked this as deprecated (see more <a href="https://pandas.pydata.org/docs/whatsnew/v1.4.0.html">here</a>)
Use <code class="inline">.concat()</code> instead:</p>
<pre class="highlight"><code class="language-python">new_george_dupe = pd.concat([george_dupe, pd.Series({'1974' : 9})])</code></pre>
</div>
</section>        
<section data-background-image="Pandas/nalug.png">
<h2 id="deletion">Deletion</h2>
<h3 id="based-on-index-entries">Based on index entries</h3>
<pre class="highlight"><code class="language-python">s = pd.Series([2, 3, 4], index=[1, 2, 1])
del s[1]
print(s)</code></pre>
<pre class="highlight"><code class="language-plain">1   4
dtype: int64</code></pre>
<h3 id="filter-creates-a-new-series">Filter (creates a new series)</h3>
<pre class="highlight"><code class="language-python">new_george_dupe = george_dupe[george_dupe &lt;= 2]
print(new_george_dupe)</code></pre>
<pre class="highlight"><code class="language-plain">1970    1
Name: George Songs, dtype: int64</code></pre>
</section>        

</section>        
<section data-background-image="Pandas/nalug.png">
<section data-background-image="Pandas/nalug.png">
<h1 id="dataframe">Dataframe</h1>
<pre class="highlight"><code class="language-python">import pandas as pd
df = pd.DataFrame({
    'growth':[.5, .7, 1.2],
    'Name':['Paul', 'George', 'Ringo'] })

print(df)</code></pre>
<pre class="highlight"><code class="inline">    Name     growth    
0   Paul        0.5
1   George      0.7
2   Ringo       1.2</code></pre>
<p><img alt="" src="Pandas/dataframe.png"/></p>
</section>        
<section data-background-image="Pandas/nalug.png">
<ul>
<li>
<p>Access row:
    </p><pre class="highlight"><code class="language-python">df.iloc[2]</code></pre>
<pre class="highlight"><code class="language-plain">Name    Ringo
growth    1.2
Name: 2, dtype: object</code></pre>
</li>
<li>
<p>Access column:
    </p><pre class="highlight"><code class="language-python">df['Name']</code></pre>
<pre class="highlight"><code class="language-plain">0      Paul
1    George
2     Ringo
Name: Name, dtype: object</code></pre>
</li>
</ul>
</section>        
<section data-background-image="Pandas/nalug.png">
<h1 id="dataframe-axis">Dataframe axis</h1>
<p><img alt="" src="Pandas/dataframe-axis.png"/></p>
</section>        
<section data-background-image="Pandas/nalug.png">
<ul>
<li>To sum up each of the columns, we sum along the index axis (axis=0), or along the row axis:</li>
</ul>
<pre class="highlight"><code class="language-python"># create a dataframe with random integers
import pandas as pd
import numpy as np

df = pd.DataFrame(np.random.randn(10,3), columns=['a', 'b', 'c'])

df.apply(np.sum, axis=0)</code></pre>
<pre class="highlight"><code class="language-plain">a    2.670586
b    4.863399
c    3.876848
dtype: float64</code></pre>
</section>        
<section data-background-image="Pandas/nalug.png">
<ul>
<li>To sum along every row, we sum down the columns axis (axis=1):</li>
</ul>
<pre class="highlight"><code class="language-python">df.apply(np.sum, axis=1)</code></pre>
<pre class="highlight"><code class="language-plain">0    1.923337
1   -1.990478
2    1.219685
3   -0.892176
4    2.153412
5    2.205712
6    4.095937
7    2.163245
8   -2.840454
9    3.372612
dtype: float64</code></pre>
</section>        

</section>        
<section data-background-image="Pandas/nalug.png">
<section data-background-image="Pandas/nalug.png">
<h1 id="create-dataframe">Create Dataframe</h1>
<h2 id="create-from-lists">Create from lists</h2>
<pre class="highlight"><code class="language-python">import pandas as pd

# initialize list of lists
data = [['tom', 10], ['nick', 15], ['juli', 14]]

# Create the pandas DataFrame
df = pd.DataFrame(data, columns = ['Name', 'Age'])

print(df)</code></pre>
<pre class="highlight"><code class="language-plain">   Name  Age
0   tom   10
1  nick   15
2  juli   14</code></pre>
</section>        
<section data-background-image="Pandas/nalug.png">
<h2 id="create-from-dict-narray-lists">Create from dict narray / lists</h2>
<pre class="highlight"><code class="language-python">import pandas as pd

# initialize data of lists.
data = {'Name':['Tom', 'nick', 'krish', 'jack'],
        'Age':[20, 21, 19, 18]}

# Create DataFrame
df = pd.DataFrame(data)

print(df)</code></pre>
<pre class="highlight"><code class="language-plain">    Name  Age
0    Tom   20
1   nick   21
2  krish   19
3   jack   18</code></pre>
</section>        
<section data-background-image="Pandas/nalug.png">
<h2 id="create-from-arrays">Create from arrays</h2>
<pre class="highlight"><code class="language-python">import pandas as pd

# initialize data of lists.
data = {'Name':['Tom', 'Jack', 'nick', 'juli'],
        'marks':[99, 98, 95, 90]}

# Creates pandas DataFrame.
df = pd.DataFrame(data, index =['rank1',
                                'rank2',
                                'rank3',
                                'rank4'])

print(df)</code></pre>
<pre class="highlight"><code class="language-plain">       Name  marks
rank1   Tom     99
rank2  Jack     98
rank3  nick     95
rank4  juli     90</code></pre>
</section>        
<section data-background-image="Pandas/nalug.png">
<h2 id="create-from-list-of-dictionaries">Create from list of dictionaries</h2>
<pre class="highlight"><code class="language-python">import pandas as pd

# Initialize data to lists.
data = [{'a': 1, 'b': 2, 'c':3},
        {'a':10, 'b': 20, 'c': 30}]

# Creates DataFrame.
df = pd.DataFrame(data, index =['first', 'second'])

print(df)</code></pre>
<pre class="highlight"><code class="language-plain">         a   b   c
first    1   2   3
second  10  20  30</code></pre>
</section>        
<section data-background-image="Pandas/nalug.png">
<h2 id="create-using-zip-function">Create using zip() function</h2>
<pre class="highlight"><code class="language-python">import pandas as pd

# List1
Name = ['tom', 'krish', 'nick', 'juli']

# List2
Age = [25, 30, 26, 22]

# get the list of tuples from two lists and merge them by using zip().
list_of_tuples = list(zip(Name, Age))

df = pd.DataFrame(list_of_tuples,
                columns = ['Name', 'Age'])

print(df)</code></pre>
<pre class="highlight"><code class="language-plain">    Name  Age
0    tom   25
1  krish   30
2   nick   26
3   juli   22</code></pre>
</section>        
<section data-background-image="Pandas/nalug.png">
<h2 id="create-from-dictionary-of-series">Create from dictionary of series</h2>
<pre class="highlight"><code class="language-python">import pandas as pd

# Initialize data to Dicts of series.
d = {'one' : pd.Series([10, 20, 30, 40],
                    index =['a', 'b', 'c', 'd']),
    'two' : pd.Series([10, 20, 30, 40],
                        index =['a', 'b', 'c', 'd'])}

df = pd.DataFrame(d)

print(df)</code></pre>
<pre class="highlight"><code class="language-plain">   one  two
a   10   10
b   20   20
c   30   30
d   40   40</code></pre>
</section>        
<section data-background-image="Pandas/nalug.png">
<h1 id="create-from-django-model">Create from Django model</h1>
<pre class="highlight"><code class="language-python">import pandas as pd
import datetime
from myapp.models import BlogPost

df = pd.DataFrame(list(BlogPost.objects.all().values()))

# case with django filter
# df = pd.DataFrame(list(BlogPost.objects.filter(date__gte=datetime.datetime(2012, 5, 1)).values()))

# limit which fields
df = pd.DataFrame(list(BlogPost.objects.all().values('author', 'date', 'slug')))</code></pre>
</section>        
<section data-background-image="Pandas/nalug.png">
<h1 id="create-json-from-dataframe">Create json from dataframe</h1>
<pre class="highlight"><code class="language-python">records = df.values.tolist() </code></pre>
</section>        

</section>        
<section data-background-image="Pandas/nalug.png">
<section data-background-image="Pandas/nalug.png">
<h1 id="dataframe-importexport">Dataframe import/export</h1>
<ul>
<li>
<p>Supported formats:</p>
<ul>
<li>CSV, JSON</li>
<li>HDF, Pickle</li>
<li>Excel</li>
<li>HTML</li>
<li>SQL</li>
<li>Latex</li>
<li>Image</li>
</ul>
</li>
<li>
<p>For the full list and options check the official <a href="https://pandas.pydata.org/docs/reference/io.html">pandas documentation</a></p>
</li>
</ul>
</section>        
<section data-background-image="Pandas/nalug.png">
<h3 id="import">Import</h3>
<pre class="highlight"><code class="inline">&lt;dataframe_variable&gt;.read_&lt;format&gt;(&lt;path&gt;)</code></pre>
<ul>
<li>Most common options<ul>
<li><code class="inline">headers</code> : allow to specify the first row-cell/column-cell to dump data frame  </li>
</ul>
</li>
</ul>
</section>        
<section data-background-image="Pandas/nalug.png">
<h4 id="from-spreadsheet">From Spreadsheet</h4>
<pre class="highlight"><code class="language-python">df = pd.read_excel(xls, 'Sheet1') </code></pre>
<pre class="highlight"><code class="language-python">df = pd.read_excel(xls, 'Sheet1', header=1) # if the header is set on the first sheet line</code></pre>
<pre class="highlight"><code class="language-python">df = pd.read_excel(xls, 'Sheet1', header=1, converters={'DateColumn': str}) # if dates must be left as string</code></pre>
<pre class="highlight"><code class="language-python">xls = pd.ExcelFile('path_to_file.xls')</code></pre>
</section>        
<section data-background-image="Pandas/nalug.png">
<ul>
<li>
<p>Read a specific sheet using the index</p>
<pre class="highlight"><code class="language-python">xls = pd.ExcelFile('path_to_file.xls')
sheet1 = xls.parse(0)</code></pre>
</li>
<li>
<p>Read a specific sheet using the name</p>
<pre class="highlight"><code class="language-python">data_file = pd.read_excel('path_to_file.xls', sheet_name="sheet_name")</code></pre>
</li>
<li>
<p>Read all the worksheets from excel to pandas dataframe as a type of OrderedDict means nested dataframes, all the worksheets as dataframes collected inside dataframe and its type is OrderedDict.</p>
<pre class="highlight"><code class="language-python">pd.read_excel('filename.xlsx', sheet_name=None)</code></pre>
</li>
</ul>
</section>        
<section data-background-image="Pandas/nalug.png">
<h4 id="read-more-sheets-and-combine-them">Read more sheets and combine them</h4>
<ul>
<li>
<p>Using pandas <code class="inline">.read_excel()</code></p>
<pre class="highlight"><code class="language-python">sheet_to_df_map = pd.read_excel('path_to_file.xls', sheet_name=None)
mdf = pd.concat(sheet_to_df_map, axis=0, ignore_index=True)</code></pre>
</li>
<li>
<p>Using pandas <code class="inline">.ExcelFile()</code></p>
<pre class="highlight"><code class="language-python">xls = pd.ExcelFile('path_to_file.xls')
sheet1 = xls.parse(0)
sheet2 = xls.parse(1)
df = pd.concat([sheet1, sheet2])</code></pre>
<pre class="highlight"><code class="language-python">file_instance = pd.ExcelFile('your_file.xlsx')
main_df = pd.concat([pd.read_excel('your_file.xlsx', sheet_name=name) for name in file_instance.sheet_names] , axis=0)</code></pre>
</li>
</ul>
</section>        
<section data-background-image="Pandas/nalug.png">
<h3 id="export">Export</h3>
<pre class="highlight"><code class="inline">&lt;dataframe_variable&gt;.to_&lt;format&gt;(&lt;path&gt;)</code></pre>
<ul>
<li><code class="inline">index=False</code> : Row (0-indexed) to use for the column labels</li>
</ul>
</section>        
<section data-background-image="Pandas/nalug.png">
<h4 id="to-csv">To CSV</h4>
<pre class="highlight"><code class="language-python"># Create a DataFrame
import pandas as pd
import numpy as np
technologies = {
    'Courses':["Spark","PySpark","Hadoop","Python"],
    'Fee' :[22000,25000,np.nan,24000],
    'Duration':['30day',None,'55days',np.nan],
    'Discount':[1000,2300,1000,np.nan]
          }
df = pd.DataFrame(technologies)</code></pre>
<pre class="highlight"><code class="language-python"># Remove header &amp; index while writing
df.to_csv("c:/tmp/courses.csv", header=False, index=False)</code></pre>
<pre class="highlight"><code class="language-plain">Spark,22000.0,30day,1000.0
PySpark,25000.0,,2300.0
Hadoop,,55days,1000.0
Python,24000.0,,</code></pre>
</section>        
<section data-background-image="Pandas/nalug.png">
<h4 id="to-spreadsheet">To Spreadsheet</h4>
<ul>
<li><code class="inline">startrow/startcol</code> : allow to specify the first row-cell/column-cell </li>
<li><code class="inline">header=False</code> : drop column header (remove column names)  </li>
</ul>
<pre class="highlight"><code class="language-python">import pandas as pd

# DataFrame Creation
sales_record = pd.DataFrame({'Products_ID': {0: 101, 1: 102, 2: 103,
                                 3: 104, 4: 105, 5: 106,
                                 6: 107, 7: 108, 8: 109},
                          'Product_Names': {0: 'Mosuse', 1: 'Keyboard', 2: 'Headphones', 3: 'CPU',
                                   4: 'Flash Drives', 5: 'Tablets', 6: 'Android Box', 7: 'LCD', 8: 'OTG Cables' },
                          'Product_Prices': {0: 700, 1: 800, 2: 200, 3: 2000,
                                    4: 100, 5: 1500, 6: 1800, 7: 1300,
                                    8: 90}})

# Specify the name of the excel file
file_name = 'ProductSales_sheet.xlsx'

# saving the excelsheet
sales_record.to_excel(file_name)
print('Sales record successfully exported into Excel File')</code></pre>
</section>        
<section data-background-image="Pandas/nalug.png">
<ul>
<li>Styles can be applied using <a href="https://github.com/DeepSpace2/StyleFrame">StyleFrame</a></li>
</ul>
<pre class="highlight"><code class="language-python">import pandas as pd
from styleframe import StyleFrame, Styler, utils   

df = pd.DataFrame({
    'Time': [1.496728e+09, 1.496728e+09, 1.496728e+09, 1.496728e+09, 1.496728e+09],
    'Expect': ['Hey', 'how', 'are', 'you', 'today?'],
    'Actual': ['Hello', 'how', 'are', 'u', 'today?'],
    'Pass/Fail': ['Failed', 'Passed', 'Passed', 'Failed', 'Passed']
    },
    columns=['Time', 'Expect', 'Actual', 'Pass/Fail'])

"""Our DataFrame looks like this:

           Time  Expect  Actual Pass/Fail
0  1.496728e+09     Hey   Hello    Failed
1  1.496728e+09     how     how    Passed
2  1.496728e+09     are     are    Passed
3  1.496728e+09     you       u    Failed
4  1.496728e+09  today?  today?    Passed

"""</code></pre>
</section>        
<section data-background-image="Pandas/nalug.png">
<pre class="highlight"><code class="language-python"># Create StyleFrame object that wrap our DataFrame and assign default style.
default_style = Styler(font=utils.fonts.aharoni, font_size=14)
sf = StyleFrame(df, styler_obj=default_style)

# Style the headers of the table
header_style = Styler(bold=True, font_size=18)
sf.apply_headers_style(styler_obj=header_style)

# Set the background color to green where the test marked as 'passed'
passed_style = Styler(bg_color=utils.colors.green, font_color=utils.colors.white)
sf.apply_style_by_indexes(indexes_to_style=sf[sf['Pass/Fail'] == 'Passed'],
                          cols_to_style='Pass/Fail', styler_obj=passed_style,
                          overwrite_default_style=False)

# Set the background color to red where the test marked as 'failed'
failed_style = Styler(bg_color=utils.colors.red, font_color=utils.colors.white)
sf.apply_style_by_indexes(indexes_to_style=sf[sf['Pass/Fail'] == 'Failed'],
                          cols_to_style='Pass/Fail',
                          styler_obj=failed_style,
                          overwrite_default_style=False)

# Change the columns width and the rows height
sf.set_column_width(columns=sf.columns, width=20)
sf.set_row_height(rows=sf.row_indexes, height=25)</code></pre>
</section>        
<section data-background-image="Pandas/nalug.png">
<pre class="highlight"><code class="language-python">sf.to_excel('output.xlsx',
            # Add filters in row 0 to each column.
            row_to_add_filters=0, 
            # Freeze the columns before column 'A' (=None) and rows above '2' (=1).
            columns_and_rows_to_freeze='A2').save()</code></pre>
</section>        
<section data-background-image="Pandas/nalug.png">
<h5 id="excelwriter">ExcelWriter</h5>
<pre class="highlight"><code class="language-python">import pandas as pd

students_data = pd.DataFrame({'Student': ['Samreena', 'Ali', 'Sara', 
                                   'Amna', 'Eva'],
                          'marks': [800, 830, 740, 910, 1090],
                          'Grades': ['B+', 'B+', 'B', 
                                    'A', 'A+']})

# writing to Excel
student_result = pd.ExcelWriter('StudentResult.xlsx')

# write students data to excel
students_data.to_excel(student_result)

# save the students result excel
student_result.save()
print('Students data is successfully written into Excel File')</code></pre>
</section>        
<section data-background-image="Pandas/nalug.png">
<ul>
<li>Multiple sheets</li>
</ul>
<pre class="highlight"><code class="language-python">import pandas as pd

# Creating records or dataset using dictionary
Science_subject = {
    'Name': ['Ali', 'Umar', 'Mirha', 'Asif', 'Samreena'],
    'Roll no': ['101', '102', '103', '104', '105'],
    'science': ['88', '60', '66', '94', '40']}

Computer_subject = {
    'Name': ['Ali', 'Umar', 'Mirha', 'Asif', 'Samreena'],
    'Roll no': ['101', '102', '103', '104', '105'],
    'computer_science': ['73', '63', '50', '95', '73']}

Art_subject = {
    'Name': ['Ali', 'Umar', 'Mirha', 'Asif', 'Samreena'],
    'Roll no': ['101', '102', '103', '104', '105'],
    'fine_arts': ['95', '63', '50', '60', '93']}

# Dictionary to Dataframe conversion
dataframe1 = pd.DataFrame(Science_subject)
dataframe2 = pd.DataFrame(Computer_subject)
dataframe3 = pd.DataFrame(Art_subject)</code></pre>
</section>        
<section data-background-image="Pandas/nalug.png">
<pre class="highlight"><code class="language-python">with pd.ExcelWriter('studentsresult.xlsx', engine='xlsxwriter') as writer:
    dataframe1.to_excel(writer, sheet_name='Science')
    dataframe2.to_excel(writer, sheet_name='Computer')
    dataframe3.to_excel(writer, sheet_name='Arts')</code></pre>
</section>        
<section data-background-image="Pandas/nalug.png">
<h4 id="to-image">To image</h4>
<pre class="highlight"><code class="language-bash">pip3 install dataframe_image</code></pre>
<pre class="highlight"><code class="language-python">import pandas as pd
import numpy as np
import dataframe_image as dfi
df = pd.DataFrame(np.random.randn(6, 6), columns=list('ABCDEF'))

# Add a gradient based on values in cell
df_styled = df.style.background_gradient()

# Save to image
dfi.export(df_styled,"mytable.png")</code></pre>
</section>        
<section data-background-image="Pandas/nalug.png">
<h3 id="examples">Examples</h3>
<h4 id="convert-csv-to-html">Convert csv to html</h4>
<pre class="highlight"><code class="language-python">import pandas as pd
df = pd.read_csv("file.csv")
df.to_html("table.html")</code></pre>
<h4 id="convert-database-table-to-spreadsheet">Convert database table to spreadsheet</h4>
<pre class="highlight"><code class="language-python">import pandas as pd
import pyodbc

conn = pyodbc.connect("&lt;connection_string&gt;")
df = pd.read_sql("SELECT * FROM table", conn)
df.to_excel("table.xlsx")</code></pre>
</section>        

</section>        
<section data-background-image="Pandas/nalug.png">
<section data-background-image="Pandas/nalug.png">
<h1 id="dataframe-methods">Dataframe methods</h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><code class="inline">inplace</code> keyword is deprecated. Assign to a variable instead</p>
</div>
<ul>
<li>
<p><code class="inline">shape</code> : displays the dataframe structure</p>
<pre class="highlight"><code class="language-python">&gt;&gt;&gt; df.shape
(3, 3)</code></pre>
</li>
<li>
<p><code class="inline">index</code> : displays the dataframe's index</p>
<pre class="highlight"><code class="language-python">&gt;&gt;&gt; df.index
(['a', 'b', 'c'], dtype='object')</code></pre>
</li>
<li>
<p><code class="inline">index.values</code> : displays the dataframe's index values</p>
<pre class="highlight"><code class="language-python">&gt;&gt;&gt; df.index.values
(['a', 'b', 'c'], dtype=object)</code></pre>
</li>
<li>
<p><code class="inline">index.size</code> : displays the dataframe's index values in a list</p>
<pre class="highlight"><code class="language-python">&gt;&gt;&gt; df.index.size
3</code></pre>
</li>
</ul>
</section>        
<section data-background-image="Pandas/nalug.png">
<pre>
</pre>
<ul>
<li>
<p><code class="inline">index.is_integer()</code> : queries if the index is integer</p>
<pre class="highlight"><code class="language-python">&gt;&gt;&gt; df.index.is_integer()
False</code></pre>
</li>
<li>
<p><code class="inline">index.is_object()</code> : queries if the index is object</p>
<pre class="highlight"><code class="language-python">&gt;&gt;&gt; df.index.is_object()
True</code></pre>
</li>
<li>
<p><code class="inline">index.is_unique()</code> : queries if the index are all different</p>
<pre class="highlight"><code class="language-python">&gt;&gt;&gt; df.index.is_unique()
True</code></pre>
</li>
<li>
<p><code class="inline">index.sort_values(ascending=True)</code> : displays the dataframe's index values sorted</p>
<pre class="highlight"><code class="language-python">&gt;&gt;&gt; df.index.sort_values(ascending=True)
Index(['c', 'b', 'a'], dtype='object')</code></pre>
</li>
</ul>
</section>        
<section data-background-image="Pandas/nalug.png">
<ul>
<li>
<p><code class="inline">reset_index(inplace=True)</code> : indexes become a column (index), and the new indexes are a progressive from 0. <code class="inline">inplace=True</code> saves the changes.</p>
<pre class="highlight"><code class="language-python">&gt;&gt;&gt; df.reset_index(inplace=True)
  index  c1  c2  c3
0     a   1   2   3
1     b   4   5   6
2     c   7   8   9</code></pre>
</li>
<li>
<p><code class="inline">set_index("index", inplace=True)</code> : sets a column as dataframe index. <code class="inline">inplace=True</code> saves the changes.</p>
<pre class="highlight"><code class="language-python">&gt;&gt;&gt; df.reset_index(inplace=True)
         c1  c2  c3
index
  a       1   2   3
  b       4   5   6
  c       7   8   9</code></pre>
</li>
</ul>
</section>        
<section data-background-image="Pandas/nalug.png">
<pre>
</pre>
<ul>
<li>
<p><code class="inline">index.rename("indici", inplace=True)</code> : sets index name</p>
<pre class="highlight"><code class="language-python">&gt;&gt;&gt; df.index.rename("indici", inplace=True)
         c1  c2  c3
indici
  a       1   2   3
  b       4   5   6
  c       7   8   9</code></pre>
</li>
<li>
<p><code class="inline">index.reset_index(drop=True, inplace=True)</code> : remove index permanently</p>
<pre class="highlight"><code class="language-python">&gt;&gt;&gt; df.index.reset_index(drop=True, inplace=True)
         c1  c2  c3

  0       1   2   3
  1       4   5   6
  2       7   8   9</code></pre>
</li>
</ul>
</section>        
<section data-background-image="Pandas/nalug.png">
<pre>
</pre>
<ul>
<li>
<p><code class="inline">set_index(pd.Series(["a", "b", "c"]), inplace=True)</code> : reset index with a Series</p>
<pre class="highlight"><code class="language-python">&gt;&gt;&gt; df.index.reset_index(drop=True, inplace=True)
         c1  c2  c3
  0       1   2   3
  1       4   5   6
  2       7   8   9</code></pre>
</li>
<li>
<p><code class="inline">head(n)</code>: prints the first <em>n</em> lines of the dataframe</p>
<pre class="highlight"><code class="language-python">&gt;&gt;&gt; df.head()  # by default first 5 lines
   c1  c2  c3
a   1   2   3
b   4   5   6
c   7   8   9

&gt;&gt;&gt; df.head(2)
   c1  c2  c3
a   1   2   3
b   4   5   6</code></pre>
</li>
</ul>
</section>        
<section data-background-image="Pandas/nalug.png">
<pre>
</pre>
<ul>
<li>
<p><code class="inline">tail(n)</code>: prints the first <em>n</em> lines of the dataframe</p>
<pre class="highlight"><code class="language-python">&gt;&gt;&gt; df.tail()  # by default first 5 lines
   c1  c2  c3
a   1   2   3
b   4   5   6
c   7   8   9

&gt;&gt;&gt; df.tail(2)
   c1  c2  c3
a   1   2   3
b   4   5   6</code></pre>
</li>
<li>
<p><code class="inline">sample(n)</code>: prints the a casual line from the dataframe. If <code class="inline">n</code> is not specified, only one sample is returned.</p>
<pre class="highlight"><code class="language-python">&gt;&gt;&gt; df.sample()
c1  c2  c3
b   4   5   6</code></pre>
</li>
</ul>
</section>        
<section data-background-image="Pandas/nalug.png">
<pre>
</pre>
<ul>
<li>
<p><code class="inline">max()</code>: returns the max value for each column</p>
<pre class="highlight"><code class="language-python">&gt;&gt;&gt; df.max()
c1    7
c2    8
c3    9
dtype: int64

&gt;&gt;&gt; df.max(1)  # max value for each row
a    3
b    6
c    9
dtype: int64</code></pre>
</li>
<li>
<p><code class="inline">max(1)</code>: returns the max value for each row</p>
<pre class="highlight"><code class="language-python">&gt;&gt;&gt; df.max(1) 
a    3
b    6
c    9
dtype: int64</code></pre>
</li>
</ul>
</section>        
<section data-background-image="Pandas/nalug.png">
<pre>
</pre>
<ul>
<li>
<p><code class="inline">min()</code>: returns the min value for each column</p>
<pre class="highlight"><code class="language-python">&gt;&gt;&gt; df.min()
c1    1
c2    2
c3    3
dtype: int64</code></pre>
</li>
<li>
<p><code class="inline">min(1)</code>: returns the min value for each row</p>
<pre class="highlight"><code class="language-python">&gt;&gt;&gt; df.min(1)
a    1
b    4
c    7
dtype: int64</code></pre>
</li>
</ul>
</section>        
<section data-background-image="Pandas/nalug.png">
<pre>
</pre>
<ul>
<li>
<p><code class="inline">describe()</code>: returns dataframe info</p>
<pre class="highlight"><code class="language-python">&gt;&gt;&gt; df.describe()
       c1   c2   c3
count  3.0  3.0  3.0
mean   4.0  5.0  6.0
std    3.0  3.0  3.0
min    1.0  2.0  3.0
25%    2.5  3.5  4.5
50%    4.0  5.0  6.0
75%    5.5  6.5  7.5
max    7.0  8.0  9.0</code></pre>
</li>
<li>
<p><code class="inline">count()</code>:</p>
<pre class="highlight"><code class="language-python">&gt;&gt;&gt; df.sum()
c1    12
c2    15
c3    18
dtype: int64</code></pre>
</li>
</ul>
</section>        
<section data-background-image="Pandas/nalug.png">
<ul>
<li>
<p><code class="inline">mean()</code>:</p>
<pre class="highlight"><code class="language-python">&gt;&gt;&gt; df.mean()
c1    4.0
c2    5.0
c3    6.0
dtype: float64</code></pre>
</li>
<li>
<p><code class="inline">std()</code>:</p>
<pre class="highlight"><code class="language-python">&gt;&gt;&gt; df.std()
c1    3.0
c2    3.0
c3    3.0
dtype: float64</code></pre>
</li>
</ul>
</section>        
<section data-background-image="Pandas/nalug.png">
<pre>
</pre>
<ul>
<li>
<p><code class="inline">sum()</code>:</p>
<pre class="highlight"><code class="language-python">&gt;&gt;&gt; df.sum()
c1    12
c2    15
c3    18
dtype: int64</code></pre>
</li>
<li>
<p><code class="inline">df.sum() / df.count() == df.mean()</code></p>
<pre class="highlight"><code class="language-python">&gt;&gt;&gt; df.sum() / df.count() == df.mean()
c1    True
c2    True
c3    True
dtype: bool</code></pre>
</li>
</ul>
</section>        

</section>        
<section data-background-image="Pandas/nalug.png">
<section data-background-image="Pandas/nalug.png">
<h1 id="dataframe-manipulation">Dataframe manipulation</h1>
<h2 id="rename-columns">Rename columns</h2>
<h3 id="rename-columns-names-by-index">Rename columns names by index</h3>
<pre class="highlight"><code class="language-python">df.columns.values[0] = "b"</code></pre>
<p>or</p>
<pre class="highlight"><code class="language-python"># Changing columns name with index number
df = df.rename(columns={df.columns[1]: 'new'})</code></pre>
<h3 id="rename-columns-names-bulk">Rename columns names (bulk)</h3>
<pre class="highlight"><code class="language-python"># Adjust column names
df = df.rename(columns={col: col.strip().replace(" ", "_") for col in df.columns})</code></pre>
<h3 id="rename-columns_1">Rename columns</h3>
<pre class="highlight"><code class="language-python">df = df.rename(columns={'oldName1': 'newName1', 'oldName2': 'newName2'})</code></pre>
</section>        
<section data-background-image="Pandas/nalug.png">
<h2 id="update-or-create-a-new-column-based-on-the-existing-one">Update or Create a new column based on the existing one</h2>
<ul>
<li>
<p>Using a single column as input</p>
<pre class="highlight"><code class="language-python">def get_url(x, var1, var2):
    ...

df['url'] = df['Id'].apply(lambda x: get_url(x, var1, var2))</code></pre>
</li>
<li>
<p>Using more columns as input arguments</p>
<pre class="highlight"><code class="language-python">df['C'] = df.apply(lambda row: function(row['A'], row['B']), axis=1)</code></pre>
</li>
</ul>
</section>        
<section data-background-image="Pandas/nalug.png">
<h2 id="dataframe-concatenation-rows">Dataframe concatenation (rows)</h2>
<p><img alt="" src="Pandas/concatenation-rows.png"/></p>
<pre class="highlight"><code class="language-python">df_concatenated = pd.concat([df1, df2])</code></pre>
</section>        
<section data-background-image="Pandas/nalug.png">
<h2 id="dataframe-concatenation-placing-columns-side-by-side">Dataframe concatenation placing columns side by side</h2>
<p><img alt="" src="Pandas/concatenation-columns.png"/></p>
<pre class="highlight"><code class="language-python">df_concatenated = pd.concat([df1, df2], axis=1)</code></pre>
</section>        
<section data-background-image="Pandas/nalug.png">
<pre class="highlight"><code class="language-python">import pandas as pd

# initialize data of lists.
data1 = {'Name': ['Tom', 'Lisa', 'Krish', 'Jack'],
        'Age': [20, 21, 19, 18],
        'Gender': ["M", "F", "M", "M"]
        }

data2 = {'Name': ['Mark', 'Stefania', 'Simon', 'Ed'],
        'Age': [25, 26, 15, 38],
        'Gender': ["M", "F", "M", "M"]
        }

# Create DataFrame
df1 = pd.DataFrame(data1)
df2 = pd.DataFrame(data2)

dfc1 = pd.concat([df1, df2])
dfc2 = pd.concat([df1, df2], axis=1)</code></pre>
</section>        

</section>        
<section data-background-image="Pandas/nalug.png">
<section data-background-image="Pandas/nalug.png">
<h1 id="query-dataframe">Query Dataframe</h1>
<ul>
<li>
<p>Load data from csv</p>
<pre class="highlight"><code class="language-python">import pandas as pd
df = pd.read_csv("https://raw.githubusercontent.com/JackyP/testing/master/datasets/nycflights.csv", usecols=range(1,17))</code></pre>
</li>
</ul>
<h2 id="dataframe-way">Dataframe way</h2>
<pre class="highlight"><code class="language-python">newdf = df[(df.origin == "JFK") &amp; (df.carrier == "B6")]</code></pre>
<h2 id="query-function"><code class="inline">.query()</code> function</h2>
<pre class="highlight"><code class="language-python">newdf = df.query('origin == "JFK" &amp; carrier == "B6"')</code></pre>
<h2 id="loc-function"><code class="inline">.loc()</code> function</h2>
<pre class="highlight"><code class="language-python">newdf = df.loc[(df.origin == "JFK") &amp; (df.carrier == "B6")]</code></pre>
</section>        
<section data-background-image="Pandas/nalug.png">
<h2 id="negate-condition">Negate condition</h2>
<pre class="highlight"><code class="language-python">newdf = df[~((df.origin == "JFK") &amp; (df.carrier == "B6"))]</code></pre>
<h2 id="starts-with">Starts with</h2>
<pre class="highlight"><code class="language-python">df[df['dest'].str[0] == 'M']</code></pre>
<h2 id="search-in-column">Search in column</h2>
<pre class="highlight"><code class="language-python">df_search_result = df[df['column'].str.contains("text_to_search", na=False)]</code></pre>
<ul>
<li><code class="inline">regex=True</code> allows to search using regex</li>
</ul>
</section>        
<section data-background-image="Pandas/nalug.png">
<h2 id="group-by">Group by</h2>
<pre class="highlight"><code class="language-python">import pandas as pd

# initialize data of lists.
data = {'Name': ['Tom', 'Lisa', 'Krish', 'Jack'],
        'Age': [20, 21, 19, 18],
        'Gender': ["M", "F", "M", "M"]
        }

# Create DataFrame
df = pd.DataFrame(data)

# Group by
by_gender = df.groupby("Gender")

for group_value, group_df in by_gender:
    print(group_value)
    print(group_df)

print(df)</code></pre>
</section>        

</section>        
<section data-background-image="Pandas/nalug.png">
<section data-background-image="Pandas/nalug.png">
<h1 id="rowscolumnns-operations">Rows/Columnns operations</h1>
<h2 id="count">Count</h2>
<pre class="highlight"><code class="language-python"># Count rows
count_row = df.shape[0]  # returns number of row count

# Count columns
count_col = df.shape[1]  # returns number of col count</code></pre>
<p>or</p>
<pre class="highlight"><code class="language-python">len(df.index)
df.shape[0]
df[df.columns[0]].count() # (== number of non-NaN values in first column)</code></pre>
</section>        
<section data-background-image="Pandas/nalug.png">
<h2 id="move-column">Move column</h2>
<pre class="highlight"><code class="language-python"># shift column 'Name' to first position
first_column = df.pop('Name')

# insert column using insert(position,column_name,
# first_column) function
df.insert(0, 'Name', first_column)</code></pre>
<h2 id="drop-columns-by-index">Drop columns by index</h2>
<pre class="highlight"><code class="language-python">df.drop(df.columns[[2,3,5]], axis=1)</code></pre>
<h2 id="drop-columns-by-column-name">Drop columns by column name</h2>
<pre class="highlight"><code class="language-python">df = df.drop(['B', 'C'], axis=1)</code></pre>
</section>        

</section>        
<section data-background-image="Pandas/nalug.png">
<section data-background-image="Pandas/nalug.png">
<h1 id="data-visualization">Data Visualization</h1>
<ul>
<li><a href="https://matplotlib.org/">Matplotlib</a> - <a href="https://matplotlib.org/cheatsheets/_images/cheatsheets-1.png">Cheatsheet</a></li>
<li><a href="https://plotly.com/">Plotly</a></li>
<li><a href="https://panel.holoviz.org/">Panel</a></li>
<li><a href="https://bokeh.org/">Boken</a></li>
</ul>
</section>        
<section data-background-image="Pandas/nalug.png">
<h1 id="matplotlib">Matplotlib</h1>
<pre class="highlight"><code class="language-python">from matplotlib import pyplot as plt
import numpy as np

# Generate 100 random data points along 3 dimensions
x, y, scale = np.random.randn(3, 100)
fig, ax = plt.subplots()

# Map each onto a scatterplot we'll create with Matplotlib
ax.scatter(x=x, y=y, c=scale, s=np.abs(scale)*500)
ax.set(title="Some random data, created with JupyterLab!")
plt.show()</code></pre>
</section>        
<section data-background-image="Pandas/nalug.png">
<h1 id="plotly">Plotly</h1>
<pre class="highlight"><code class="language-python">import pandas as pd
import plotly.graph_objects as go

data = [
    ['Ravi', 21, 67],
    ['Kiran', 24, 61],
    ['Anita', 18, 46],
    ['Smita', 20, 78],
    ['Sunil', 17, 90]
]

df = pd.DataFrame(data, columns=['name', 'age', 'marks'], dtype=float)

print(df)

trace = go.Bar(x=df.name, y=df.marks)
fig = go.Figure(data=[trace])

fig.show()</code></pre>
<ul>
<li><code class="inline">fig.show()</code> runs the server and open the chart in the browser</li>
</ul>
</section>        
<section data-background-image="Pandas/nalug.png">
<h3 id="scatter">Scatter</h3>
<pre class="highlight"><code class="language-python">import plotly
import plotly.graph_objs as go
import pandas as pd

df = pd.read_csv('https://raw.githubusercontent.com/pcm-dpc/COVID-19/master/dati-andamento-nazionale/dpc-covid19-ita-andamento-nazionale.csv')

# Create a trace
data = [go.Scatter(
    x=df['data'],
    y=df['totale_positivi'],
)]
layout = go.Layout(
        xaxis=dict(
            title='Data',
        ),
        yaxis=dict(
            title='Totale positivi',
        )
    )
fig = go.Figure(data=data, layout=layout)

plotly.offline.plot(fig, filename='positives.html')</code></pre>
<ul>
<li><code class="inline">plotly.offline.plot()</code> allows to the save the content locally, rather than run a server</li>
</ul>
</section>        
<section data-background-image="Pandas/nalug.png">
<h3 id="same-example-without-dataframe">Same example without Dataframe</h3>
<pre class="highlight"><code class="language-python">import plotly
import plotly.graph_objs as go

labels = ['home', 'transports', 'food']
sizes = ['500', '300', '100']

# Data to plot with plotly
trace = go.Pie(labels=labels, values=sizes)

div_tag = plotly.offline.plot([trace], include_plotlyjs=False, output_type='div')
html_content = plotly.offline.plot([trace], include_plotlyjs=True, auto_open=False)</code></pre>
<ul>
<li><code class="inline">div_tag</code> variable contains the content of the html div content (allowed by <code class="inline">output_type='div'</code>)</li>
<li><code class="inline">include_plotlyjs</code> allows to choose whether the div contains the plotly.js content</li>
<li><code class="inline">auto_open=False</code> prevents from the file being opened automatically</li>
</ul>
</section>        

</section>        


			</div>

		</div>

		<script src="dist/reveal.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js"></script>
        <script src="plugin/copycode/copycode.js"></script>
		<script src="plugin/zoom/zoom.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/search/search.js"></script>
		<script src="plugin/markdown/markdown.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		
		<!-- Third-Party Plugin for menu -->
        <script src="plugin/menu/menu.js"></script>

		<script>

			// Also available as an ES module, see:
			// https://revealjs.com/initialization/
			Reveal.initialize({
				controls: true,
				progress: true,
				center: true,
				hash: true,
				slideNumber: true,

                copycode: {
                    copy: "Copy",
                    copied: "Copied!",
                    timeout: 1000,
                    copybg: "orange",
                    copiedbg: "green",
                    copycolor: "black",
                    copiedcolor: "white"
                },

				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealZoom, RevealNotes, RevealSearch, RevealMarkdown, RevealHighlight, RevealMenu, CopyCode ]
			});

		</script>
		
		<script>
		function addCopyButtons(clipboard) {
            document.querySelectorAll('pre > code').forEach(function (codeBlock) {
                var button = document.createElement('button');
                button.className = 'copy-code-button';
                button.type = 'button';
                button.innerText = 'Copy';
        
                button.addEventListener('click', function () {
                    clipboard.writeText(codeBlock.innerText).then(function () {
                        /* Chrome doesn't seem to blur automatically,
                           leaving the button in a focused state. */
                        button.blur();
        
                        button.innerText = 'Copied!';
        
                        setTimeout(function () {
                            button.innerText = 'Copy';
                        }, 2000);
                    }, function (error) {
                        button.innerText = 'Error';
                    });
                });
        
                var pre = codeBlock.parentNode;
                if (pre.parentNode.classList.contains('highlight')) {
                    var highlight = pre.parentNode;
                    highlight.parentNode.insertBefore(button, highlight);
                } else {
                    pre.parentNode.insertBefore(button, pre);
                }
            });
        }
        /*
        if (navigator && navigator.clipboard) {
            addCopyButtons(navigator.clipboard);
        } else {
            var script = document.createElement('script');
            script.src = 'https://cdnjs.cloudflare.com/ajax/libs/clipboard-polyfill/2.7.0/clipboard-polyfill.promise.js';
            script.integrity = 'sha256-waClS2re9NUbXRsryKoof+F9qc1gjjIhc2eT7ZbIv94=';
            script.crossOrigin = 'anonymous';
            script.onload = function() {
                addCopyButtons(clipboard);
            };
        
            document.body.appendChild(script);
        }
        */
		</script>

	</body>
</html>
